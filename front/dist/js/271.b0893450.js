"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[271],{1271:function(t,e,s){s.r(e),s.d(e,{default:function(){return p}});var o=s(641),a=s(33);const i={class:"flex flex-wrap"},r=["onClick"],n=["src"];function h(t,e,s,h,c,l){return(0,o.uX)(),(0,o.CE)("div",null,[e[0]||(e[0]=(0,o.Lk)("p",{class:"text-[1.5rem] mb-[4.6875rem]"},"Выберите необходимую обложку",-1)),(0,o.Lk)("div",i,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.covers,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,a.C4)(["w-1/2 pr-[2.875rem] mb-[2.875rem] cursor-pointer hover:scale-[1.02] transition",{"animate-pulse":e.id===t.store.book.cover_type_id}]),onClick:t=>l.choose(e.id)},[(0,o.Lk)("img",{class:"w-full",src:e.image_link,alt:"book"},null,8,n)],10,r)))),128))])])}var c=s(6506),l={name:"CoverView",data:()=>({store:(0,c._)(),covers:[]}),methods:{async getCovers(){await this.store.getCovers().then((()=>{this.covers=this.store.covers}))},choose(t){this.store.saveCover(this.store.book.id,t),this.$router.push("/client/book/title")}},mounted(){this.getCovers()}},k=s(6262);const d=(0,k.A)(l,[["render",h]]);var p=d},6506:function(t,e,s){s.d(e,{_:function(){return a}});var o=s(5615);const a=(0,o.nY)("book",{state:()=>({book:null,chapter:null,chapters:[],covers:[]}),actions:{setBook(t){this.book=t},setChapter(t){this.chapter=t},setChapters(t){this.chapters=t},setCovers(t){this.covers=t},async fetchBookById(t){await this.$axios.get(`/book/${t}`).then((t=>{this.setBook(t.data.book)}))},async fetchBookByUserId(t){await this.$axios.get(`/book/user/${t}`).then((t=>{this.setBook(t.data.book)}))},async upsertQuestionnaire(t,e){await this.$axios.post(`/book/${t}/questionnaire`,e).then((t=>{alert("Ваша анкета успешно сохранена");let e=t.data.book;this.setBook(e),this.$router.push("/")}))},async getCovers(){await this.$axios.get("/book/covers").then((t=>{this.setCovers(t.data.covers)}))},async saveCover(t,e){await this.$axios.post(`/book/${t}/cover`,{cover_type_id:e}).then((t=>{this.setBook(t.data.book)}))},async getChapters(t){await this.$axios.get(`/book/${t}/chapters`).then((t=>{this.setChapters(t.data)}))},async saveTitle(t,e){await this.$axios.post(`/book/${t}/title`,e).then((t=>{alert(t.data.message),this.setBook(t.data.book)}))},async getChapter(t){return await this.$axios.get(`/chapter/${t}`).then((t=>(this.setChapter(t.data.chapter),t.data)))},async saveChapter(t,e){await this.$axios.post(`/chapter/${t}`,{text:e}).then((t=>{alert(t.data.message)}))},async generatePDF(t){await this.$axios.get(`/book/${t}/pdf`,{responseType:"blob"}).then((t=>{const e=URL.createObjectURL(t.data),s=document.createElement("a");s.href=e,s.setAttribute("download","file.pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)}))},async closeBook(t){return await this.$axios.post(`/book/${t}/close`).then((t=>t.data.message))},async toggleBook(t){await this.$axios.post(`/book/${t}/toggle`).then((t=>{alert(t.data.message)}))},async getTotalPages(t){return await this.$axios.get(`/book/${t}/total-pages`).then((t=>t.data.total_pages))}}})}}]);
//# sourceMappingURL=271.b0893450.js.map