{"version":3,"file":"js/820.87e0dcbb.js","mappings":"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","sources":["webpack://front/./src/components/GoldenText.vue","webpack://front/./src/components/GoldenText.vue?2052","webpack://front/./src/views/Client/QuestionnaireView.vue","webpack://front/./src/views/Client/QuestionnaireView.vue?8138","webpack://front/./src/plugins/variants.js","webpack://front/./src/stores/book.js"],"sourcesContent":["<template>\n    <div class=\"flex flex-col items-center justify-center\">\n        <img class=\"w-[20.3125rem] h-[1.1875rem] mb-[1.25rem]\" src=\"@/assets/img/gold.png\" alt=\"gold.png\">\n        <p class=\"text-gold mb-[1.4375rem]\">{{ text }}</p>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"GoldenText\",\n\n    props: {\n        text: {\n            type: String,\n            required: true\n        }\n    }\n}\n</script>\n\n<style scoped>\np {\n    font-family: 'Leotaro', sans-serif;\n    line-height: 1;\n}\n</style>","import { render } from \"./GoldenText.vue?vue&type=template&id=60bc2a74&scoped=true\"\nimport script from \"./GoldenText.vue?vue&type=script&lang=js\"\nexport * from \"./GoldenText.vue?vue&type=script&lang=js\"\n\nimport \"./GoldenText.vue?vue&type=style&index=0&id=60bc2a74&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-60bc2a74\"]])\n\nexport default __exports__","<template>\n    <div class=\"mt-[4.1875rem]\">\n        <div class=\"intro mb-[3.25rem]\">\n            <GoldenText text=\"Моя анкета. Вводные данные\"/>\n        </div>\n\n        <div class=\"form\">\n            <h2>Данные</h2>\n            <p class=\"mb-[.75rem]\">Напишите пожалуйста ваши ФИО, возраст, место рождения, место жительства, профессия,\n                род деятельности на\n                данный момент:</p>\n            <textarea v-model=\"form.self_info\" placeholder=\"Введите текст...\"></textarea>\n\n            <div class=\"w-full h-[2px] bg-[#E3B661] opacity-20 rounded mt-[2.9375rem] mb-[2.1875rem]\"></div>\n\n            <h2>Для кого мы пишем эту книгу?</h2>\n            <div class=\"variants flex flex-wrap justify-between items-center\">\n                <div class=\"variant flex w-1/4 mb-[.6875rem]\" v-for=\"variant in variants\">\n                    <input\n                        name=\"variant\"\n                        type=\"radio\"\n                        class=\"mr-2\"\n                        :key=\"variant.value\"\n                        :value=\"variant.value\"\n                        v-model=\"form.for_who\"\n                    >\n                    <p>{{ variant.text }}</p>\n                </div>\n                <input\n                    type=\"text\"\n                    v-model=\"form.other\"\n                    v-if=\"form.for_who === 'other'\"\n                    placeholder=\"Другое\"\n                >\n            </div>\n\n            <div class=\"w-full h-[2px] bg-[#E3B661] opacity-20 rounded mt-[2.9375rem] mb-[2.1875rem]\"></div>\n\n            <h2>О чем будет история</h2>\n            <p class=\"mb-2\">Поделитесь ниже, о чем будет история (истории), которую вы бы хотели сохранить в своей\n                книге: какие факты\n                из жизни хотели бы сохранить, значимые события, имена, воспоминания. Опишите своими словами\n                в 2-3 предложениях или тезисно, но постарайтесь вспомнить минимум 3 важных события, истории или\n                периоды вашей жизни.</p>\n            <p class=\"text-[#FFE8BD] opacity-30 mb-5\">Возможно, вам помогут «шпаргалки» ниже:<br>\n                Я хочу сохранить свои воспоминания: о детстве; о родителях; о друзьях;\n                о творчестве; о детях; о взрослении; о свадьбе; о беременности; о достижениях; о трудных или переломных\n                моментах; об отношениях в семье; о взаимопонимании; про семейные ценности; о предках (про бабушек и\n                дедушек); о студенчестве и тд.</p>\n            <textarea v-model=\"form.summary\" placeholder=\"Введите текст...\"></textarea>\n            <p class=\"mb-[2.875rem] text-right\">{{ form.summary?.length }}</p>\n\n            <button class=\"mb-[12.625rem]\" @click=\"submitQuestionnaire\">Отправить данные</button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport GoldenText from \"@/components/GoldenText.vue\";\nimport {useBookStore} from \"@/stores/book\";\nimport variants from \"@/plugins/variants\";\n\nexport default {\n    name: \"QuestionnaireView\",\n\n    components: {GoldenText},\n\n    data: () => ({\n        store: useBookStore(),\n\n        form: {\n            book_id: null,\n            self_info: null,\n            for_who: null,\n            summary: null,\n            other: null,\n        },\n\n        variants: variants\n    }),\n\n    methods: {\n        submitQuestionnaire() {\n            if (this.form.summary.length < 400) {\n                alert('Поле \"О чем будет история\" должно содержать не менее 400 символов (включая пробелы)')\n            } else {\n                if (this.form.other) {\n                    this.form.for_who = this.form.other\n                }\n\n                this.store.upsertQuestionnaire(this.store.book.id, this.form)\n            }\n        }\n    },\n\n    watch: {\n        'form.for_who'() {\n            if (this.form.for_who !== 'other') {\n                this.form.other = null\n            }\n        }\n    },\n\n\n    mounted() {\n        let questionnaire = this.store.book?.questionnaire\n\n        if (questionnaire) {\n            this.form = {\n                self_info: questionnaire.self_info,\n                for_who: questionnaire.for_who,\n                summary: questionnaire.summary,\n            }\n\n            if (!['family', 'all', 'future', 'present', 'me', 'legacy', 'reflection', 'other'].includes(questionnaire.for_who)) {\n                this.form.for_who = 'other'\n                this.form.other = questionnaire.for_who\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\nh2 {\n    @apply text-white text-[1rem] font-bold mb-[.5rem];\n}\n</style>","import { render } from \"./QuestionnaireView.vue?vue&type=template&id=19ea9d5d&scoped=true\"\nimport script from \"./QuestionnaireView.vue?vue&type=script&lang=js\"\nexport * from \"./QuestionnaireView.vue?vue&type=script&lang=js\"\n\nimport \"./QuestionnaireView.vue?vue&type=style&index=0&id=19ea9d5d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-19ea9d5d\"]])\n\nexport default __exports__","export default [\n  {\n    text: 'Для семьи',\n    value: 'family'\n  },\n  {\n    text: 'Для всеобщего пользования',\n    value: 'all'\n  },\n  {\n    text: 'Послание себе на будущее',\n    value: 'future'\n  },\n  {\n    text: 'В подарок',\n    value: 'present'\n  },\n  {\n    text: 'Для себя',\n    value: 'me'\n  },\n  {\n    text: 'Для потомков',\n    value: 'legacy'\n  },\n  {\n    text: 'Для рефлексии',\n    value: 'reflection'\n  },\n  {\n    text: 'Свой вариант',\n    value: 'other'\n  },\n]","import {defineStore} from \"pinia\";\n\nexport const useBookStore = defineStore(\"book\", {\n  state: () => {\n    return {\n      book: null,\n      chapter: null,\n      chapters: [],\n      covers: [],\n    }\n  },\n  actions: {\n    setBook(book) {\n      this.book = book\n    },\n\n    setChapter(chapter) {\n      this.chapter = chapter\n    },\n\n    setChapters(chapters) {\n      this.chapters = chapters\n    },\n\n    setCovers(covers) {\n      this.covers = covers\n    },\n\n    async fetchBookById(bookId) {\n      await this.$axios.get(`/book/${bookId}`)\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async fetchBookByUserId(userId) {\n      await this.$axios.get(`/book/user/${userId}`)\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async upsertQuestionnaire(bookId, payload) {\n      await this.$axios.post(`/book/${bookId}/questionnaire`, payload)\n        .then(response => {\n          alert('Ваша анкета успешно сохранена')\n          let book = response.data.book\n          this.setBook(book)\n          this.$router.push('/')\n        })\n    },\n\n    async getCovers() {\n      await this.$axios.get('/book/covers')\n        .then(response => {\n          this.setCovers(response.data.covers)\n        })\n    },\n\n    async saveCover(bookId, coverId) {\n      await this.$axios.post(`/book/${bookId}/cover`, {cover_type_id: coverId})\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async getChapters(bookId) {\n      await this.$axios.get(`/book/${bookId}/chapters`)\n        .then(response => {\n          this.setChapters(response.data)\n        })\n    },\n\n    async saveTitle(bookId, payload) {\n      await this.$axios.post(`/book/${bookId}/title`, payload)\n        .then(response => {\n          alert(response.data.message)\n          this.setBook(response.data.book)\n        })\n    },\n\n    async getChapter(chapterId) {\n      return await this.$axios.get(`/chapter/${chapterId}`).then(response => {\n        this.setChapter(response.data.chapter)\n        return response.data\n      })\n    },\n\n    async saveChapter(chapterId, text) {\n      await this.$axios.post(`/chapter/${chapterId}`, {text: text}).then(response => {\n        alert(response.data.message)\n      })\n    },\n\n    async generatePDF(bookId) {\n      await this.$axios.get(`/book/${bookId}/pdf`, {\n        responseType: 'blob'\n      }).then(response => {\n        // create file link in browser's memory\n        const href = URL.createObjectURL(response.data);\n\n        // create \"a\" HTML element with href to file & click\n        const link = document.createElement('a');\n        link.href = href;\n        link.setAttribute('download', 'file.pdf'); //or any other extension\n        document.body.appendChild(link);\n        link.click();\n\n        // clean up \"a\" element & remove ObjectURL\n        document.body.removeChild(link);\n        URL.revokeObjectURL(href);\n      })\n    },\n\n    async closeBook(bookId) {\n      return await this.$axios.post(`/book/${bookId}/close`).then(response => {\n        return response.data.message\n      })\n    },\n\n    async toggleBook(bookId) {\n      await this.$axios.post(`/book/${bookId}/toggle`).then(response => {\n        alert(response.data.message)\n      })\n    },\n\n    async getTotalPages(bookId) {\n      return await this.$axios.get(`/book/${bookId}/total-pages`).then(response => {\n        return response.data.total_pages\n      })\n    },\n\n    async addImage(chapterId, image) {\n      let formData = new FormData()\n      formData.append('image', image)\n\n      return await this.$axios.post(`/chapter/${chapterId}/image`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        return response.data.url\n      })\n    }\n  }\n})"],"names":["class","src","alt","text","name","props","type","String","required","__exports__","render","form","placeholder","self_info","variants","variant","key","value","for_who","other","summary","length","submitQuestionnaire","components","GoldenText","data","store","book_id","methods","this","alert","upsertQuestionnaire","book","id","watch","mounted","questionnaire","includes","useBookStore","state","chapter","chapters","covers","actions","setBook","setChapter","setChapters","setCovers","fetchBookById","bookId","$axios","get","then","response","fetchBookByUserId","userId","payload","post","$router","push","getCovers","saveCover","coverId","cover_type_id","getChapters","saveTitle","message","getChapter","chapterId","saveChapter","generatePDF","responseType","href","URL","createObjectURL","link","document","createElement","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","closeBook","toggleBook","getTotalPages","total_pages","addImage","image","formData","FormData","append","headers","url"],"sourceRoot":""}