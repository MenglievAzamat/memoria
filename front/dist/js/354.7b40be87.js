"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[354],{6636:function(t,e,a){a.d(e,{A:function(){return U}});var o=a(641),c=a(33),n=a.p+"img/book.a7af3d3b.png";const s={class:"leotaro relative w-full h-[47.5rem] text-center flex justify-end items-center mb-[3.75rem]"},l={key:0,class:"w-1/2 pr-[3rem] pl-[1.5rem] z-10"},r={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro']"},i={class:"text-[0.99975rem] font-['Leotaro']"},p={key:1,class:"helvetica w-full h-full px-[1.5rem] z-10 flex"},h={class:"w-1/2 h-full flex flex-col justify-center p-[4rem]"},d={class:"header h-[10%]"},u={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-left"},g={class:"body h-[85%]"},k={key:0,class:"font-[Montserrat] text-black text-[1.66625rem] text-center mb-4 font-bold"},b=["src"],x=["innerHTML"],m={class:"footer h-[5%]"},f={class:"helvetica text-[1.4163125rem] text-black"},y={class:"w-1/2 h-full flex flex-col justify-center p-[4rem]"},v={class:"header h-[10%]"},w={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-right"},$={class:"body h-[85%]"},L={key:0,class:"font-[Montserrat] text-black text-[1.66625rem] text-center mb-4 font-bold"},E=["src"],R=["innerHTML"],C={class:"footer h-[5%]"},_={class:"helvetica text-[1.4163125rem] text-black"};function B(t,e,a,B,T,j){return(0,o.uX)(),(0,o.CE)("div",s,[a.payload.title?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("h1",r,(0,c.v_)(a.payload.title),1),(0,o.Lk)("h2",i,(0,c.v_)(a.payload.subtitle),1)])):((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",h,[(0,o.Lk)("div",d,[(0,o.Lk)("p",u,(0,c.v_)(j.book.title),1)]),(0,o.Lk)("div",g,[a.payload[0]?.title?((0,o.uX)(),(0,o.CE)("p",k,(0,c.v_)(a.payload[0]?.title),1)):(0,o.Q3)("",!0),a.payload[0]?.image?((0,o.uX)(),(0,o.CE)("img",{key:1,class:"w-full h-full",src:a.payload[0]?.image,alt:""},null,8,b)):(0,o.Q3)("",!0),(0,o.Lk)("p",{class:"break-words hyphens-auto helvetica text-[1.4163125rem] text-black text-justify",innerHTML:j.text(a.payload[0]?.text)},null,8,x)]),(0,o.Lk)("div",m,[(0,o.Lk)("p",f,(0,c.v_)(a.payload[0]?a.payload[0].page:""),1)])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",v,[(0,o.Lk)("p",w,(0,c.v_)(j.book.subtitle),1)]),(0,o.Lk)("div",$,[a.payload[1]?.title?((0,o.uX)(),(0,o.CE)("p",L,(0,c.v_)(a.payload[1]?.title),1)):(0,o.Q3)("",!0),a.payload[1]?.image?((0,o.uX)(),(0,o.CE)("img",{key:1,class:"w-full h-full",src:a.payload[1]?.image,alt:""},null,8,E)):(0,o.Q3)("",!0),(0,o.Lk)("p",{class:"break-words hyphens-auto helvetica text-[1.4163125rem] text-black text-justify",innerHTML:j.text(a.payload[1]?.text)},null,8,R)]),(0,o.Lk)("div",C,[(0,o.Lk)("p",_,(0,c.v_)(a.payload[1]?a.payload[1].page:""),1)])])])),e[0]||(e[0]=(0,o.Lk)("img",{class:"absolute right-0 left-0 top-0 bottom-0 z-0",src:n,alt:"book.png"},null,-1))])}var T=a(6506),j=a(9223),A={name:"Preview",props:{payload:{type:Object},image:{type:File}},data:()=>({bookStore:(0,T._)()}),computed:{book(){return this.bookStore.book}},methods:{text(t){let e=t?t.replaceAll("\n","<br>").replaceAll("    ","&nbsp;&nbsp;&nbsp;&nbsp;"):"";return(0,j.A)(e,{hyphens:!0})}}},S=a(6262);const X=(0,S.A)(A,[["render",B],["__scopeId","data-v-765ff516"]]);var U=X},6388:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var o=a(641),c=a(3751);function n(t,e,a,n,s,l){const r=(0,o.g2)("Preview");return(0,o.uX)(),(0,o.CE)("div",null,[e[3]||(e[3]=(0,o.Lk)("p",{class:"text-[1.5rem] mb-[1.6875rem]"},"Введите текст титульного листа",-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"mb-[0.6875rem]","onUpdate:modelValue":e[0]||(e[0]=e=>t.form.title=e),placeholder:"Заголовок..."},null,512),[[c.Jo,t.form.title]]),(0,o.bo)((0,o.Lk)("textarea",{class:"mb-[0.6875rem]","onUpdate:modelValue":e[1]||(e[1]=e=>t.form.subtitle=e),placeholder:"Подзаголовок..."},null,512),[[c.Jo,t.form.subtitle]]),(0,o.Lk)("button",{class:"mb-[1.125rem]",onClick:e[2]||(e[2]=(...t)=>l.saveTitle&&l.saveTitle(...t))},"Сохранить"),(0,o.bF)(r,{type:"cover",payload:t.form},null,8,["payload"])])}var s=a(6636),l=a(6506),r={name:"TitleView",components:{Preview:s.A},data:()=>({bookStore:(0,l._)(),form:{title:null,subtitle:null}}),methods:{saveTitle(){this.bookStore.saveTitle(this.bookStore.book.id,this.form)}},mounted(){this.bookStore.book&&(this.form={title:this.bookStore.book.title,subtitle:this.bookStore.book.subtitle})}},i=a(6262);const p=(0,i.A)(r,[["render",n]]);var h=p},6506:function(t,e,a){a.d(e,{_:function(){return c}});var o=a(5615);const c=(0,o.nY)("book",{state:()=>({book:null,chapter:null,chapters:[],covers:[]}),actions:{setBook(t){this.book=t},setChapter(t){this.chapter=t},setChapters(t){this.chapters=t},setCovers(t){this.covers=t},async fetchBookById(t){await this.$axios.get(`/book/${t}`).then((t=>{this.setBook(t.data.book)}))},async fetchBookByUserId(t){await this.$axios.get(`/book/user/${t}`).then((t=>{this.setBook(t.data.book)}))},async upsertQuestionnaire(t,e){await this.$axios.post(`/book/${t}/questionnaire`,e).then((t=>{alert("Ваша анкета успешно сохранена");let e=t.data.book;this.setBook(e),this.$router.push("/")}))},async getCovers(){await this.$axios.get("/book/covers").then((t=>{this.setCovers(t.data.covers)}))},async saveCover(t,e){await this.$axios.post(`/book/${t}/cover`,{cover_type_id:e}).then((t=>{this.setBook(t.data.book)}))},async getChapters(t){await this.$axios.get(`/book/${t}/chapters`).then((t=>{this.setChapters(t.data)}))},async saveTitle(t,e){await this.$axios.post(`/book/${t}/title`,e).then((t=>{alert(t.data.message),this.setBook(t.data.book)}))},async getChapter(t){return await this.$axios.get(`/chapter/${t}`).then((t=>(this.setChapter(t.data.chapter),t.data)))},async saveChapter(t,e){await this.$axios.post(`/chapter/${t}`,{text:e}).then((t=>{alert(t.data.message)}))},async generatePDF(t){await this.$axios.get(`/book/${t}/pdf`,{responseType:"blob"}).then((t=>{const e=URL.createObjectURL(t.data),a=document.createElement("a");a.href=e,a.setAttribute("download","file.pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)}))},async closeBook(t){return await this.$axios.post(`/book/${t}/close`).then((t=>t.data.message))},async toggleBook(t){await this.$axios.post(`/book/${t}/toggle`).then((t=>{alert(t.data.message)}))},async getTotalPages(t){return await this.$axios.get(`/book/${t}/total-pages`).then((t=>t.data.total_pages))}}})},9223:function(t,e,a){a.d(e,{A:function(){return x}});var o="[абвгдеёжзийклмнопрстуфхцчшщъыьэюя]",c="[аеёиоуыэюя]",n="[бвгджзклмнпрстфхцчшщ]",s="[йъь]",l="­",r="‑",i=" ",p="—",h="–",d="«",u="»",g={corto:"и|а|в|к|у|с|о|не|но|на|из|от|об|до|по|во|за|со",largo:"над|под|как"},k={hyphens:!1,digits:!1,digitsR:!1,header:!1,ndash:!1,quotes:!1},b={common:[[new RegExp("&nbsp;","gi"),i],[new RegExp(" (-|–|—) ","g"),"".concat(i).concat(p," ")],[new RegExp(" {2}","g")," "],[new RegExp("-(й|я|е) ","g"),"".concat(r,"$1 ")],[new RegExp("-(й|я|е) ","g"),"".concat(r,"$1").concat(i)],[new RegExp(" (".concat(g.corto,") "),"gi")," $1".concat(i)],[new RegExp("".concat(i,"(").concat(g.corto,") "),"gi"),"".concat(i,"$1").concat(i)],[new RegExp("^(".concat(g.corto,") "),"gi"),"$1".concat(i)]],digits:[[new RegExp(" (\\d+) ","g"),"".concat(i,"$1").concat(i)],[new RegExp("".concat(i,"(\\d+) "),"g"),"".concat(i,"$1").concat(i)]],digitsR:[[new RegExp(" (\\d+) ","g")," $1".concat(i)]],ndash:[[new RegExp("-","g"),"".concat(h)]],header:[[new RegExp(" (".concat(g.largo,") "),"gi")," $1".concat(i)]],hyphens:[[new RegExp("(".concat(s,")(").concat(o).concat(o,")"),"ig"),"$1".concat(l,"$2")],[new RegExp("(".concat(c,")(").concat(c).concat(o,")"),"ig"),"$1".concat(l,"$2")],[new RegExp("(".concat(c).concat(n,")(").concat(n).concat(c,")"),"ig"),"$1".concat(l,"$2")],[new RegExp("(".concat(n).concat(c,")(").concat(n).concat(c,")"),"ig"),"$1".concat(l,"$2")],[new RegExp("(".concat(c).concat(n,")(").concat(n).concat(n).concat(c,")"),"ig"),"$1".concat(l,"$2")],[new RegExp("(".concat(c).concat(n).concat(n,")(").concat(n).concat(n).concat(c,")"),"ig"),"$1".concat(l,"$2")]],quotes:[[new RegExp('\\="([^"]*)"',"gmi"),"='$1'"],[new RegExp('"('.concat(o,"|[0-9])"),"gmi"),"".concat(d,"$1")],[new RegExp('"',"gmi"),u],[new RegExp("\\='([^']*)'","gmi"),'="$1"']]};function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;if(null==t||"string"!==typeof t)return t;var a=Object.keys(b).reduce((function(t,a){return e[a]?t.concat(b[a]):t}),b.common);return a.reduce((function(t,e){return t.replace(e[0],e[1])}),t)}}}]);
//# sourceMappingURL=354.7b40be87.js.map