"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[581],{3581:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var s=a(641),o=a(33);const i={class:"flex flex-wrap"},r=["onClick"],n=["src"];function h(t,e,a,h,c,l){return(0,s.uX)(),(0,s.CE)("div",null,[e[0]||(e[0]=(0,s.Lk)("p",{class:"text-[1.5rem] mb-[4.6875rem]"},"Выберите цвет обложки",-1)),(0,s.Lk)("div",i,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.covers,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,o.C4)(["w-1/2 pr-[2.875rem] mb-[2.875rem] cursor-pointer hover:scale-[1.02] transition",{"animate-pulse":e.id===t.store.book.cover_type_id}]),onClick:t=>l.choose(e.id)},[(0,s.Lk)("img",{class:"w-full",src:e.image_link,alt:"book"},null,8,n)],10,r)))),128))])])}var c=a(6506),l={name:"CoverView",data:()=>({store:(0,c._)(),covers:[]}),methods:{async getCovers(){await this.store.getCovers().then((()=>{this.covers=this.store.covers}))},choose(t){this.store.saveCover(this.store.book.id,t),this.$router.push("/client/book/title")}},mounted(){this.getCovers()}},d=a(6262);const p=(0,d.A)(l,[["render",h]]);var k=p},6506:function(t,e,a){a.d(e,{_:function(){return o}});var s=a(5615);const o=(0,s.nY)("book",{state:()=>({book:null,chapter:null,chapters:[],covers:[]}),actions:{setBook(t){this.book=t},setChapter(t){this.chapter=t},setChapters(t){this.chapters=t},setCovers(t){this.covers=t},async fetchBookById(t){await this.$axios.get(`/book/${t}`).then((t=>{this.setBook(t.data.book)}))},async fetchBookByUserId(t){await this.$axios.get(`/book/user/${t}`).then((t=>{this.setBook(t.data.book)}))},async upsertQuestionnaire(t,e){await this.$axios.post(`/book/${t}/questionnaire`,e).then((t=>{alert("Ваша анкета успешно сохранена");let e=t.data.book;this.setBook(e),this.$router.push("/")}))},async getCovers(){await this.$axios.get("/book/covers").then((t=>{this.setCovers(t.data.covers)}))},async saveCover(t,e){await this.$axios.post(`/book/${t}/cover`,{cover_type_id:e}).then((t=>{this.setBook(t.data.book)}))},async getChapters(t){await this.$axios.get(`/book/${t}/chapters`).then((t=>{this.setChapters(t.data)}))},async saveTitle(t,e){await this.$axios.post(`/book/${t}/title`,e).then((t=>{alert(t.data.message),this.setBook(t.data.book)}))},async getChapter(t){return await this.$axios.get(`/chapter/${t}`).then((t=>(this.setChapter(t.data.chapter),t.data)))},async saveChapter(t,e){await this.$axios.post(`/chapter/${t}`,{text:e}).then((t=>{alert(t.data.message)}))},async generatePDF(t){await this.$axios.get(`/book/${t}/pdf`,{responseType:"blob"}).then((t=>{const e=URL.createObjectURL(t.data),a=document.createElement("a");a.href=e,a.setAttribute("download","file.pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)}))},async closeBook(t){return await this.$axios.post(`/book/${t}/close`).then((t=>t.data.message))},async toggleBook(t){await this.$axios.post(`/book/${t}/toggle`).then((t=>{alert(t.data.message)}))},async getTotalPages(t){return await this.$axios.get(`/book/${t}/total-pages`).then((t=>t.data.total_pages))},async addImage(t,e){let a=new FormData;return a.append("image",e),await this.$axios.post(`/chapter/${t}/image`,a,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>t.data.url))}}})}}]);
//# sourceMappingURL=581.cc2fd9c8.js.map