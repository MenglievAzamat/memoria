{"version":3,"file":"js/354.40bfa3c5.js","mappings":"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","sources":["webpack://front/./src/components/Book/Preview.vue","webpack://front/./src/components/Book/Preview.vue?107d","webpack://front/./src/views/Book/TitleView.vue","webpack://front/./src/views/Book/TitleView.vue?c974","webpack://front/./src/stores/book.js","webpack://front/./node_modules/ru-typo/build/typo.js"],"sourcesContent":["<template>\n    <div class=\"leotaro relative w-full h-[47.5rem] text-center flex justify-end items-center mb-[3.75rem]\">\n        <div v-if=\"payload.title\" class=\"w-1/2 pr-[3rem] pl-[1.5rem] z-10\">\n            <h1 class=\"text-black text-wrap text-[1.66625rem] font-['Leotaro']\">{{ payload.title }}</h1>\n            <h2 class=\"text-[0.99975rem] font-['Leotaro']\">{{ payload.subtitle }}</h2>\n        </div>\n\n        <div v-else class=\"helvetica w-full h-full px-[1.5rem] z-10 flex\">\n            <div class=\"w-1/2 h-full flex flex-col justify-center p-[4rem]\">\n                <div class=\"header h-[10%]\">\n                    <p class=\"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-left\">{{ book.title }}</p>\n                </div>\n                <div class=\"body h-[85%]\">\n                    <p v-if=\"payload[0]?.title\" class=\"font-[Montserrat] text-black text-[1.66625rem] text-center mb-[.4rem] font-bold\">{{ payload[0]?.title }}</p>\n                    <img v-if=\"payload[0]?.image\" class=\"w-full h-full\" :src=\"payload[0]?.image\" alt=\"\">\n                    <p class=\"break-words hyphens-auto helvetica text-[1.4163125rem] text-black text-justify\" v-html=\"text(payload[0]?.text)\"></p>\n                </div>\n                <div class=\"footer h-[5%]\">\n                    <p class=\"helvetica text-[1.4163125rem] text-black\">{{ payload[0] ? payload[0].page : ''}}</p>\n<!--                    <p class=\"helvetica text-[1.4163125rem] text-black\">{{ payload[0]?.text?.length}}</p>-->\n                </div>\n            </div>\n            <div class=\"w-1/2 h-full flex flex-col justify-center p-[4rem]\">\n                <div class=\"header h-[10%]\">\n                    <p class=\"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-right\">{{ book.subtitle }}</p>\n                </div>\n                <div class=\"body h-[85%]\">\n                    <p v-if=\"payload[1]?.title\" class=\"font-[Montserrat] text-black text-[1.66625rem] text-center mb-[.4rem] font-bold\">{{ payload[1]?.title }}</p>\n                    <img v-if=\"payload[1]?.image\" class=\"w-full h-full\" :src=\"payload[1]?.image\" alt=\"\">\n                    <p class=\"break-words hyphens-auto helvetica text-[1.4163125rem] text-black text-justify\" v-html=\"text(payload[1]?.text)\"></p>\n                </div>\n                <div class=\"footer h-[5%]\">\n                    <p class=\"helvetica text-[1.4163125rem]  text-black\">{{ payload[1] ? payload[1].page : ''}}</p>\n<!--                    <p class=\"helvetica text-[1.4163125rem]  text-black\">{{ payload[1]?.text?.length}}</p>-->\n                </div>\n            </div>\n        </div>\n\n        <img class=\"absolute right-0 left-0 top-0 bottom-0 z-0\" src=\"@/assets/img/book.png\" alt=\"book.png\">\n    </div>\n</template>\n\n<script>\nimport {useBookStore} from \"@/stores/book\";\nimport typo from \"ru-typo\";\n\nexport default {\n    name: \"Preview\",\n\n    props: {\n        payload: {\n            type: Object,\n        },\n\n        image: {\n            type: File,\n        }\n    },\n\n    data: () => ({\n        bookStore: useBookStore()\n    }),\n\n    computed: {\n        book() {\n            return this.bookStore.book\n        }\n    },\n\n    methods: {\n        text(text) {\n            let result = text ? text.replaceAll('\\n', '<br>').replaceAll('    ', '&nbsp;&nbsp;&nbsp;&nbsp;') : '';\n\n            return typo(result, { hyphens: true });\n        }\n    }\n}\n</script>\n\n<style scoped>\n.leotaro {\n    font-family: Leotaro, sans-serif !important;\n    font-size: 1.375rem !important;\n}\n\n.helvetica {\n    font-family: Helvetica, sans-serif !important;\n    font-size: 1.375rem !important;\n    line-height: 125%;\n}\n</style>","import { render } from \"./Preview.vue?vue&type=template&id=2622a196&scoped=true\"\nimport script from \"./Preview.vue?vue&type=script&lang=js\"\nexport * from \"./Preview.vue?vue&type=script&lang=js\"\n\nimport \"./Preview.vue?vue&type=style&index=0&id=2622a196&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2622a196\"]])\n\nexport default __exports__","<template>\n    <div>\n        <p class=\"text-[1.5rem] mb-[1.6875rem]\">Введите текст титульного листа</p>\n\n        <textarea class=\"mb-[0.6875rem]\" v-model=\"form.title\" placeholder=\"Заголовок...\"></textarea>\n\n        <textarea class=\"mb-[0.6875rem]\" v-model=\"form.subtitle\" placeholder=\"Подзаголовок...\"></textarea>\n        <button class=\"mb-[1.125rem]\" @click=\"saveTitle\">Сохранить</button>\n\n        <Preview type=\"cover\" :payload=\"form\"/>\n    </div>\n</template>\n\n<script>\nimport Preview from \"@/components/Book/Preview.vue\";\nimport {useBookStore} from \"@/stores/book\";\n\nexport default {\n    name: \"TitleView\",\n\n    components: {Preview},\n\n    data: () => ({\n        bookStore: useBookStore(),\n\n        form: {\n            title: null,\n            subtitle: null,\n        }\n    }),\n\n    methods: {\n        saveTitle() {\n            this.bookStore.saveTitle(this.bookStore.book.id, this.form)\n        }\n    },\n\n    mounted() {\n        if (this.bookStore.book) {\n            this.form = {\n                title: this.bookStore.book.title,\n                subtitle: this.bookStore.book.subtitle,\n            }\n        }\n    }\n}\n</script>","import { render } from \"./TitleView.vue?vue&type=template&id=b3686722\"\nimport script from \"./TitleView.vue?vue&type=script&lang=js\"\nexport * from \"./TitleView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {defineStore} from \"pinia\";\n\nexport const useBookStore = defineStore(\"book\", {\n  state: () => {\n    return {\n      book: null,\n      chapter: null,\n      chapters: [],\n      covers: [],\n    }\n  },\n  actions: {\n    setBook(book) {\n      this.book = book\n    },\n\n    setChapter(chapter) {\n      this.chapter = chapter\n    },\n\n    setChapters(chapters) {\n      this.chapters = chapters\n    },\n\n    setCovers(covers) {\n      this.covers = covers\n    },\n\n    async fetchBookById(bookId) {\n      await this.$axios.get(`/book/${bookId}`)\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async fetchBookByUserId(userId) {\n      await this.$axios.get(`/book/user/${userId}`)\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async upsertQuestionnaire(bookId, payload) {\n      await this.$axios.post(`/book/${bookId}/questionnaire`, payload)\n        .then(response => {\n          alert('Ваша анкета успешно сохранена')\n          let book = response.data.book\n          this.setBook(book)\n          this.$router.push('/')\n        })\n    },\n\n    async getCovers() {\n      await this.$axios.get('/book/covers')\n        .then(response => {\n          this.setCovers(response.data.covers)\n        })\n    },\n\n    async saveCover(bookId, coverId) {\n      await this.$axios.post(`/book/${bookId}/cover`, {cover_type_id: coverId})\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async getChapters(bookId) {\n      await this.$axios.get(`/book/${bookId}/chapters`)\n        .then(response => {\n          this.setChapters(response.data)\n        })\n    },\n\n    async saveTitle(bookId, payload) {\n      await this.$axios.post(`/book/${bookId}/title`, payload)\n        .then(response => {\n          alert(response.data.message)\n          this.setBook(response.data.book)\n        })\n    },\n\n    async getChapter(chapterId) {\n      return await this.$axios.get(`/chapter/${chapterId}`).then(response => {\n        this.setChapter(response.data.chapter)\n        return response.data\n      })\n    },\n\n    async saveChapter(chapterId, text) {\n      await this.$axios.post(`/chapter/${chapterId}`, {text: text}).then(response => {\n        alert(response.data.message)\n      })\n    },\n\n    async generatePDF(bookId) {\n      await this.$axios.get(`/book/${bookId}/pdf`, {\n        responseType: 'blob'\n      }).then(response => {\n        // create file link in browser's memory\n        const href = URL.createObjectURL(response.data);\n\n        // create \"a\" HTML element with href to file & click\n        const link = document.createElement('a');\n        link.href = href;\n        link.setAttribute('download', 'file.pdf'); //or any other extension\n        document.body.appendChild(link);\n        link.click();\n\n        // clean up \"a\" element & remove ObjectURL\n        document.body.removeChild(link);\n        URL.revokeObjectURL(href);\n      })\n    },\n\n    async closeBook(bookId) {\n      return await this.$axios.post(`/book/${bookId}/close`).then(response => {\n        return response.data.message\n      })\n    },\n\n    async toggleBook(bookId) {\n      await this.$axios.post(`/book/${bookId}/toggle`).then(response => {\n        alert(response.data.message)\n      })\n    },\n\n    async getTotalPages(bookId) {\n      return await this.$axios.get(`/book/${bookId}/total-pages`).then(response => {\n        return response.data.total_pages\n      })\n    },\n\n    async addImage(chapterId, image) {\n      let formData = new FormData()\n      formData.append('image', image)\n\n      return await this.$axios.post(`/chapter/${chapterId}/image`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        return response.data.url\n      })\n    }\n  }\n})","var any = \"[абвгдеёжзийклмнопрстуфхцчшщъыьэюя]\";\nvar vowel = \"[аеёиоуыэюя]\";\nvar consonant = \"[бвгджзклмнпрстфхцчшщ]\";\nvar sign = \"[йъь]\";\nvar shy = \"­\"; // &shy;\n\nvar nonBreakingHyphen = \"‑\"; // &#8209;\n\nvar nonBreakingSpace = \" \"; // &nbsp;\n\nvar dash = \"—\"; // &mdash;\n\nvar nonBreakingDash = \"–\"; // &#8211;\n\nvar openingQuote = \"«\";\nvar closingQuote = \"»\";\nvar preposiciones = {\n  corto: \"и|а|в|к|у|с|о|не|но|на|из|от|об|до|по|во|за|со\",\n  largo: \"над|под|как\"\n};\nvar defaultOptions = {\n  hyphens: false,\n  digits: false,\n  digitsR: false,\n  header: false,\n  ndash: false,\n  quotes: false\n};\nvar patterns = {\n  common: [[new RegExp(\"&nbsp;\", \"gi\"), nonBreakingSpace], [new RegExp(\" (-|–|—) \", \"g\"), \"\".concat(nonBreakingSpace).concat(dash, \" \")], [new RegExp(\" {2}\", \"g\"), \" \"], [new RegExp(\"-(й|я|е) \", \"g\"), \"\".concat(nonBreakingHyphen, \"$1 \")], [new RegExp(\"-(й|я|е) \", \"g\"), \"\".concat(nonBreakingHyphen, \"$1\").concat(nonBreakingSpace)], [new RegExp(\" (\".concat(preposiciones.corto, \") \"), \"gi\"), \" $1\".concat(nonBreakingSpace)], [new RegExp(\"\".concat(nonBreakingSpace, \"(\").concat(preposiciones.corto, \") \"), \"gi\"), \"\".concat(nonBreakingSpace, \"$1\").concat(nonBreakingSpace)], [new RegExp(\"^(\".concat(preposiciones.corto, \") \"), \"gi\"), \"$1\".concat(nonBreakingSpace)]],\n  digits: [[new RegExp(\" (\\\\d+) \", \"g\"), \"\".concat(nonBreakingSpace, \"$1\").concat(nonBreakingSpace)], [new RegExp(\"\".concat(nonBreakingSpace, \"(\\\\d+) \"), \"g\"), \"\".concat(nonBreakingSpace, \"$1\").concat(nonBreakingSpace)] // TODO TESTS\n  ],\n  digitsR: [[new RegExp(\" (\\\\d+) \", \"g\"), \" $1\".concat(nonBreakingSpace)]],\n  // LIKELY TO BE RENAMED AND EXTENDED (FOR MORE GENERAL DASH HANDLING),\n  // USE WITH CAUTION\n  ndash: [[new RegExp(\"-\", \"g\"), \"\".concat(nonBreakingDash)]],\n  header: [[new RegExp(\" (\".concat(preposiciones.largo, \") \"), \"gi\"), \" $1\".concat(nonBreakingSpace)]],\n  hyphens: [[new RegExp(\"(\".concat(sign, \")(\").concat(any).concat(any, \")\"), \"ig\"), \"$1\".concat(shy, \"$2\")], [new RegExp(\"(\".concat(vowel, \")(\").concat(vowel).concat(any, \")\"), \"ig\"), \"$1\".concat(shy, \"$2\")], [new RegExp(\"(\".concat(vowel).concat(consonant, \")(\").concat(consonant).concat(vowel, \")\"), \"ig\"), \"$1\".concat(shy, \"$2\")], [new RegExp(\"(\".concat(consonant).concat(vowel, \")(\").concat(consonant).concat(vowel, \")\"), \"ig\"), \"$1\".concat(shy, \"$2\")], [new RegExp(\"(\".concat(vowel).concat(consonant, \")(\").concat(consonant).concat(consonant).concat(vowel, \")\"), \"ig\"), \"$1\".concat(shy, \"$2\")], [new RegExp(\"(\".concat(vowel).concat(consonant).concat(consonant, \")(\").concat(consonant).concat(consonant).concat(vowel, \")\"), \"ig\"), \"$1\".concat(shy, \"$2\")]],\n  quotes: [[new RegExp('\\\\=\"([^\"]*)\"', \"gmi\"), \"='$1'\"], [new RegExp(\"\\\"(\".concat(any, \"|[0-9])\"), \"gmi\"), \"\".concat(openingQuote, \"$1\")], [new RegExp(\"\\\"\", \"gmi\"), closingQuote], [new RegExp(\"\\\\='([^']*)'\", \"gmi\"), '=\"$1\"'] // prevents HTML attributes like href=\"https://github.com\" from being broken\n  ]\n}; // typo :: String -> Object -> String\n\nfunction typo(s) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOptions;\n\n  if (s == null || typeof s !== \"string\") {\n    return s;\n  }\n\n  var P = Object.keys(patterns).reduce(function (acc, key) {\n    return options[key] ? acc.concat(patterns[key]) : acc;\n  }, patterns.common);\n  return P.reduce(function (acc, p) {\n    return acc.replace(p[0], p[1]);\n  }, s);\n}\n\nexport { typo as default };\n"],"names":["class","payload","title","subtitle","book","image","src","alt","text","page","name","props","type","Object","File","data","bookStore","computed","this","methods","result","replaceAll","typo","hyphens","__exports__","render","form","placeholder","saveTitle","components","Preview","id","mounted","useBookStore","state","chapter","chapters","covers","actions","setBook","setChapter","setChapters","setCovers","fetchBookById","bookId","$axios","get","then","response","fetchBookByUserId","userId","upsertQuestionnaire","post","alert","$router","push","getCovers","saveCover","coverId","cover_type_id","getChapters","message","getChapter","chapterId","saveChapter","generatePDF","responseType","href","URL","createObjectURL","link","document","createElement","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","closeBook","toggleBook","getTotalPages","total_pages","addImage","formData","FormData","append","headers","url","any","vowel","consonant","sign","shy","nonBreakingHyphen","nonBreakingSpace","dash","nonBreakingDash","openingQuote","closingQuote","preposiciones","corto","largo","defaultOptions","digits","digitsR","header","ndash","quotes","patterns","common","RegExp","concat","s","options","arguments","length","undefined","P","keys","reduce","acc","key","p","replace"],"sourceRoot":""}