{"version":3,"file":"js/271.fe90c210.js","mappings":"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","sources":["webpack://front/./src/views/Book/CoverView.vue","webpack://front/./src/views/Book/CoverView.vue?d33c","webpack://front/./src/stores/book.js"],"sourcesContent":["<template>\n    <div>\n        <p class=\"text-[1.5rem] mb-[4.6875rem]\">Выберите необходимую обложку</p>\n\n        <div class=\"flex flex-wrap\">\n            <div\n                v-for=\"cover in covers\"\n                :key=\"cover.id\"\n                class=\"w-1/2 pr-[2.875rem] mb-[2.875rem] cursor-pointer hover:scale-[1.02] transition\"\n                :class=\"{'animate-pulse': cover.id === store.book.cover_type_id}\"\n                @click=\"choose(cover.id)\"\n            >\n                <img class=\"w-full\" :src=\"cover.image_link\" alt=\"book\">\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport {useBookStore} from \"@/stores/book\";\n\nexport default {\n    name: \"CoverView\",\n\n    data: () => ({\n        store: useBookStore(),\n\n        covers: []\n    }),\n\n    methods: {\n        async getCovers() {\n            await this.store.getCovers().then(() => {\n                this.covers = this.store.covers\n            })\n        },\n\n        choose(coverId) {\n            this.store.saveCover(this.store.book.id, coverId)\n            this.$router.push('/client/book/title')\n        }\n    },\n\n    mounted() {\n        this.getCovers()\n    }\n}\n</script>","import { render } from \"./CoverView.vue?vue&type=template&id=32ecdebc\"\nimport script from \"./CoverView.vue?vue&type=script&lang=js\"\nexport * from \"./CoverView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {defineStore} from \"pinia\";\n\nexport const useBookStore = defineStore(\"book\", {\n  state: () => {\n    return {\n      book: null,\n      chapter: null,\n      page: null,\n      chapters: [],\n      covers: [],\n    }\n  },\n  actions: {\n    setBook(book) {\n      this.book = book\n    },\n\n    setChapter(chapter) {\n      this.chapter = chapter\n    },\n\n    setPage(page) {\n      this.page = page\n    },\n\n    setChapters(chapters) {\n      this.chapters = chapters\n    },\n\n    setCovers(covers) {\n      this.covers = covers\n    },\n\n    async fetchBookById(bookId) {\n      await this.$axios.get(`/book/${bookId}`)\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async fetchBookByUserId(userId) {\n      await this.$axios.get(`/book/user/${userId}`)\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async upsertQuestionnaire(bookId, payload) {\n      await this.$axios.post(`/book/${bookId}/questionnaire`, payload)\n        .then(response => {\n          alert('Ваша анкета успешно сохранена')\n          let book = response.data.book\n          this.setBook(book)\n          this.$router.push('/')\n        })\n    },\n\n    async getCovers() {\n      await this.$axios.get('/book/covers')\n        .then(response => {\n          this.setCovers(response.data.covers)\n        })\n    },\n\n    async saveCover(bookId, coverId) {\n      await this.$axios.post(`/book/${bookId}/cover`, {cover_type_id: coverId})\n        .then(response => {\n          this.setBook(response.data.book)\n        })\n    },\n\n    async getChapters(bookId) {\n      await this.$axios.get(`/book/${bookId}/chapters`)\n        .then(response => {\n          this.setChapters(response.data)\n        })\n    },\n\n    async saveTitle(bookId, payload) {\n      await this.$axios.post(`/book/${bookId}/title`, payload)\n        .then(response => {\n          alert(response.data.message)\n          this.setBook(response.data.book)\n        })\n    },\n\n    async getChapter(chapterId) {\n      await this.$axios.get(`/chapter/${chapterId}`).then(response => {\n        this.setChapter(response.data.chapter)\n      })\n    },\n\n    async savePage(pageId, payload) {\n      await this.$axios.post(`/page/${pageId}`, payload).then(async response => {\n        alert(response.data.message)\n        this.setPage(response.data.page)\n      })\n    },\n\n    async addPage(chapterId) {\n      await this.$axios.post(`/chapter/${chapterId}/page`).then(response => {\n        alert(response.data.message)\n        this.setPage(response.data.page)\n      })\n    },\n\n    async generatePDF(bookId) {\n      await this.$axios.get(`/book/${bookId}/pdf`, {\n        responseType: 'blob'\n      }).then(response => {\n        // create file link in browser's memory\n        const href = URL.createObjectURL(response.data);\n\n        // create \"a\" HTML element with href to file & click\n        const link = document.createElement('a');\n        link.href = href;\n        link.setAttribute('download', 'file.pdf'); //or any other extension\n        document.body.appendChild(link);\n        link.click();\n\n        // clean up \"a\" element & remove ObjectURL\n        document.body.removeChild(link);\n        URL.revokeObjectURL(href);\n      })\n    },\n\n    async closeBook(bookId) {\n      return await this.$axios.post(`/book/${bookId}/close`).then(response => {\n        return response.data.message\n      })\n    },\n\n    async toggleBook(bookId) {\n      await this.$axios.post(`/book/${bookId}/toggle`).then(response => {\n        alert(response.data.message)\n      })\n    }\n  }\n})"],"names":["class","covers","cover","key","id","store","book","cover_type_id","choose","src","image_link","alt","name","data","methods","getCovers","this","then","coverId","saveCover","$router","push","mounted","__exports__","render","useBookStore","state","chapter","page","chapters","actions","setBook","setChapter","setPage","setChapters","setCovers","fetchBookById","bookId","$axios","get","response","fetchBookByUserId","userId","upsertQuestionnaire","payload","post","alert","getChapters","saveTitle","message","getChapter","chapterId","savePage","pageId","async","addPage","generatePDF","responseType","href","URL","createObjectURL","link","document","createElement","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","closeBook","toggleBook"],"sourceRoot":""}