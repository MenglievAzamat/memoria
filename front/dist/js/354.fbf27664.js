"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[354],{9734:function(t,e,a){a.d(e,{A:function(){return st}});var o=a(641),l=a(33),s=a.p+"img/book.a7af3d3b.png";const c={class:"leotaro relative w-full h-[47.5rem] text-center flex justify-end items-center mb-[3.75rem]"},n={key:0,class:"w-1/2 pr-[3rem] pl-[1.5rem] z-10"},i={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro']"},r={class:"text-[0.99975rem] font-['Leotaro']"},p={key:1,class:"helvetica w-full h-full px-[1.5rem] z-10 flex"},d={class:"w-1/2 h-full flex flex-col justify-center p-[4rem]"},h={class:"header h-[10%]"},k={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-left"},u={class:"h-[6%]"},x={key:0,class:"font-[Montserrat] text-black text-[1.66625rem] text-center mb-4 font-bold"},g={class:"body h-[79%]"},b=["src"],f=["innerHTML"],m={class:"footer h-[5%]"},y={class:"helvetica text-[1.4163125rem] text-black"},v={key:2,class:"helvetica w-full h-full px-[1.5rem] z-10 flex"},w={class:"w-1/2 h-full flex flex-col justify-center p-[4rem]"},L={class:"header h-[10%]"},$={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-right"},E={class:"h-[6%]"},C={key:0,class:"font-[Montserrat] text-black text-[1.66625rem] text-center mb-4 font-bold"},R={class:"body h-[79%]"},_=["src"],T=["innerHTML"],X={class:"footer h-[5%]"},j={class:"helvetica text-[1.4163125rem] text-black"},B={key:3,class:"helvetica w-full h-full px-[1.5rem] z-10 flex"},M={class:"w-1/2 h-full flex flex-col justify-center p-[4rem]"},A={class:"header h-[10%]"},P={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-left"},Q={class:"h-[6%]"},H={key:0,class:"font-[Montserrat] text-black text-[1.66625rem] text-center mb-4 font-bold"},S={class:"body h-[79%]"},U=["src"],z=["innerHTML"],O={class:"footer h-[5%]"},q={class:"helvetica text-[1.4163125rem] text-black"},F={class:"w-1/2 h-full flex flex-col justify-center p-[4rem]"},I={class:"header h-[10%]"},V={class:"text-black text-wrap text-[1.66625rem] font-['Leotaro'] text-right"},J={class:"h-[6%]"},D={key:0,class:"font-[Montserrat] text-black text-[1.66625rem] text-center mb-4 font-bold"},Y={class:"body h-[79%]"},G=["src"],K=["innerHTML"],N={class:"footer h-[5%]"},W={class:"helvetica text-[1.4163125rem] text-black"};function Z(t,e,a,Z,tt,et){return(0,o.uX)(),(0,o.CE)("div",c,[a.payload.title?((0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("h1",i,(0,l.v_)(a.payload.title),1),(0,o.Lk)("h2",r,(0,l.v_)(a.payload.subtitle),1)])):a.payload.page&&a.payload.page%2!==0?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",d,[(0,o.Lk)("div",h,[(0,o.Lk)("p",k,(0,l.v_)(et.book.title),1)]),(0,o.Lk)("div",u,[a.payload?.title?((0,o.uX)(),(0,o.CE)("p",x,(0,l.v_)(a.payload?.title),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",g,[a.payload[0]?.image?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"w-full h-full",src:a.payload?.image,alt:""},null,8,b)):(0,o.Q3)("",!0),(0,o.Lk)("p",{class:"helvetica text-[1.4163125rem] text-black text-justify",innerHTML:et.text(a.payload?.text)},null,8,f)]),(0,o.Lk)("div",m,[(0,o.Lk)("p",y,(0,l.v_)(a.payload?a.payload.page:""),1)])]),e[0]||(e[0]=(0,o.Lk)("div",{class:"w-1/2 h-full"},null,-1))])):a.payload.page&&a.payload.page%2===0?((0,o.uX)(),(0,o.CE)("div",v,[e[1]||(e[1]=(0,o.Lk)("div",{class:"w-1/2 h-full"},null,-1)),(0,o.Lk)("div",w,[(0,o.Lk)("div",L,[(0,o.Lk)("p",$,(0,l.v_)(et.book.subtitle),1)]),(0,o.Lk)("div",E,[a.payload?.title?((0,o.uX)(),(0,o.CE)("p",C,(0,l.v_)(a.payload?.title),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",R,[a.payload?.image?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"w-full h-full",src:a.payload?.image,alt:""},null,8,_)):(0,o.Q3)("",!0),(0,o.Lk)("p",{class:"helvetica text-[1.4163125rem] text-black text-justify",innerHTML:et.text(a.payload?.text)},null,8,T)]),(0,o.Lk)("div",X,[(0,o.Lk)("p",j,(0,l.v_)(a.payload?a.payload.page:""),1)])])])):((0,o.uX)(),(0,o.CE)("div",B,[(0,o.Lk)("div",M,[(0,o.Lk)("div",A,[(0,o.Lk)("p",P,(0,l.v_)(et.book.title),1)]),(0,o.Lk)("div",Q,[a.payload[0]?.title?((0,o.uX)(),(0,o.CE)("p",H,(0,l.v_)(a.payload[0]?.title),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",S,[a.payload[0]?.image?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"w-full h-full",src:a.payload[0]?.image,alt:""},null,8,U)):(0,o.Q3)("",!0),(0,o.Lk)("p",{class:"helvetica text-[1.4163125rem] text-black text-justify",innerHTML:et.text(a.payload[0]?.text)},null,8,z)]),(0,o.Lk)("div",O,[(0,o.Lk)("p",q,(0,l.v_)(a.payload[0]?a.payload[0].page:""),1)])]),(0,o.Lk)("div",F,[(0,o.Lk)("div",I,[(0,o.Lk)("p",V,(0,l.v_)(et.book.subtitle),1)]),(0,o.Lk)("div",J,[a.payload[1]?.title?((0,o.uX)(),(0,o.CE)("p",D,(0,l.v_)(a.payload[1]?.title),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Y,[a.payload[1]?.image?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"w-full h-full",src:a.payload[1]?.image,alt:""},null,8,G)):(0,o.Q3)("",!0),(0,o.Lk)("p",{class:"helvetica text-[1.4163125rem] text-black text-justify",innerHTML:et.text(a.payload[1]?.text)},null,8,K)]),(0,o.Lk)("div",N,[(0,o.Lk)("p",W,(0,l.v_)(a.payload[1]?a.payload[1].page:""),1)])])])),e[2]||(e[2]=(0,o.Lk)("img",{class:"absolute right-0 left-0 top-0 bottom-0 z-0",src:s,alt:"book.png"},null,-1))])}var tt=a(6506),et=a(9223),at={name:"Preview",props:{payload:{type:Object},image:{type:File}},data:()=>({bookStore:(0,tt._)()}),computed:{book(){return this.bookStore.book}},methods:{text(t){let e=t?t.replaceAll("\n","<br>").replaceAll("    ","&nbsp;&nbsp;&nbsp;&nbsp;"):"";return(0,et.A)(e,{hyphens:!0})}}},ot=a(6262);const lt=(0,ot.A)(at,[["render",Z],["__scopeId","data-v-385640e6"]]);var st=lt},6388:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var o=a(641),l=a(3751);function s(t,e,a,s,c,n){const i=(0,o.g2)("Preview");return(0,o.uX)(),(0,o.CE)("div",null,[e[3]||(e[3]=(0,o.Lk)("p",{class:"text-[1.5rem] mb-[1.6875rem]"},"Введите текст титульного листа",-1)),(0,o.bo)((0,o.Lk)("textarea",{class:"mb-[0.6875rem]","onUpdate:modelValue":e[0]||(e[0]=e=>t.form.title=e),placeholder:"Заголовок..."},null,512),[[l.Jo,t.form.title]]),(0,o.bo)((0,o.Lk)("textarea",{class:"mb-[0.6875rem]","onUpdate:modelValue":e[1]||(e[1]=e=>t.form.subtitle=e),placeholder:"Подзаголовок..."},null,512),[[l.Jo,t.form.subtitle]]),(0,o.Lk)("button",{class:"mb-[1.125rem]",onClick:e[2]||(e[2]=(...t)=>n.saveTitle&&n.saveTitle(...t))},"Сохранить"),(0,o.bF)(i,{type:"cover",payload:t.form},null,8,["payload"])])}var c=a(9734),n=a(6506),i={name:"TitleView",components:{Preview:c.A},data:()=>({bookStore:(0,n._)(),form:{title:null,subtitle:null}}),methods:{saveTitle(){this.bookStore.saveTitle(this.bookStore.book.id,this.form)}},mounted(){this.bookStore.book&&(this.form={title:this.bookStore.book.title,subtitle:this.bookStore.book.subtitle})}},r=a(6262);const p=(0,r.A)(i,[["render",s]]);var d=p},6506:function(t,e,a){a.d(e,{_:function(){return l}});var o=a(5615);const l=(0,o.nY)("book",{state:()=>({book:null,chapter:null,page:null,chapters:[],covers:[]}),actions:{setBook(t){this.book=t},setChapter(t){this.chapter=t},setPage(t){this.page=t},setChapters(t){this.chapters=t},setCovers(t){this.covers=t},async fetchBookById(t){await this.$axios.get(`/book/${t}`).then((t=>{this.setBook(t.data.book)}))},async fetchBookByUserId(t){await this.$axios.get(`/book/user/${t}`).then((t=>{this.setBook(t.data.book)}))},async upsertQuestionnaire(t,e){await this.$axios.post(`/book/${t}/questionnaire`,e).then((t=>{alert("Ваша анкета успешно сохранена");let e=t.data.book;this.setBook(e),this.$router.push("/")}))},async getCovers(){await this.$axios.get("/book/covers").then((t=>{this.setCovers(t.data.covers)}))},async saveCover(t,e){await this.$axios.post(`/book/${t}/cover`,{cover_type_id:e}).then((t=>{this.setBook(t.data.book)}))},async getChapters(t){await this.$axios.get(`/book/${t}/chapters`).then((t=>{this.setChapters(t.data)}))},async saveTitle(t,e){await this.$axios.post(`/book/${t}/title`,e).then((t=>{alert(t.data.message),this.setBook(t.data.book)}))},async getChapter(t){await this.$axios.get(`/chapter/${t}`).then((t=>{this.setChapter(t.data.chapter)}))},async savePage(t,e){await this.$axios.post(`/page/${t}`,e).then((async t=>{alert(t.data.message),this.setPage(t.data.page)}))},async addPage(t){await this.$axios.post(`/chapter/${t}/page`).then((t=>{alert(t.data.message),this.setPage(t.data.page)}))},async generatePDF(t){await this.$axios.get(`/book/${t}/pdf`,{responseType:"blob"}).then((t=>{const e=URL.createObjectURL(t.data),a=document.createElement("a");a.href=e,a.setAttribute("download","file.pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)}))},async closeBook(t){return await this.$axios.post(`/book/${t}/close`).then((t=>t.data.message))},async toggleBook(t){await this.$axios.post(`/book/${t}/toggle`).then((t=>{alert(t.data.message)}))}}})},9223:function(t,e,a){a.d(e,{A:function(){return b}});var o="[абвгдеёжзийклмнопрстуфхцчшщъыьэюя]",l="[аеёиоуыэюя]",s="[бвгджзклмнпрстфхцчшщ]",c="[йъь]",n="­",i="‑",r=" ",p="—",d="–",h="«",k="»",u={corto:"и|а|в|к|у|с|о|не|но|на|из|от|об|до|по|во|за|со",largo:"над|под|как"},x={hyphens:!1,digits:!1,digitsR:!1,header:!1,ndash:!1,quotes:!1},g={common:[[new RegExp("&nbsp;","gi"),r],[new RegExp(" (-|–|—) ","g"),"".concat(r).concat(p," ")],[new RegExp(" {2}","g")," "],[new RegExp("-(й|я|е) ","g"),"".concat(i,"$1 ")],[new RegExp("-(й|я|е) ","g"),"".concat(i,"$1").concat(r)],[new RegExp(" (".concat(u.corto,") "),"gi")," $1".concat(r)],[new RegExp("".concat(r,"(").concat(u.corto,") "),"gi"),"".concat(r,"$1").concat(r)],[new RegExp("^(".concat(u.corto,") "),"gi"),"$1".concat(r)]],digits:[[new RegExp(" (\\d+) ","g"),"".concat(r,"$1").concat(r)],[new RegExp("".concat(r,"(\\d+) "),"g"),"".concat(r,"$1").concat(r)]],digitsR:[[new RegExp(" (\\d+) ","g")," $1".concat(r)]],ndash:[[new RegExp("-","g"),"".concat(d)]],header:[[new RegExp(" (".concat(u.largo,") "),"gi")," $1".concat(r)]],hyphens:[[new RegExp("(".concat(c,")(").concat(o).concat(o,")"),"ig"),"$1".concat(n,"$2")],[new RegExp("(".concat(l,")(").concat(l).concat(o,")"),"ig"),"$1".concat(n,"$2")],[new RegExp("(".concat(l).concat(s,")(").concat(s).concat(l,")"),"ig"),"$1".concat(n,"$2")],[new RegExp("(".concat(s).concat(l,")(").concat(s).concat(l,")"),"ig"),"$1".concat(n,"$2")],[new RegExp("(".concat(l).concat(s,")(").concat(s).concat(s).concat(l,")"),"ig"),"$1".concat(n,"$2")],[new RegExp("(".concat(l).concat(s).concat(s,")(").concat(s).concat(s).concat(l,")"),"ig"),"$1".concat(n,"$2")]],quotes:[[new RegExp('\\="([^"]*)"',"gmi"),"='$1'"],[new RegExp('"('.concat(o,"|[0-9])"),"gmi"),"".concat(h,"$1")],[new RegExp('"',"gmi"),k],[new RegExp("\\='([^']*)'","gmi"),'="$1"']]};function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;if(null==t||"string"!==typeof t)return t;var a=Object.keys(g).reduce((function(t,a){return e[a]?t.concat(g[a]):t}),g.common);return a.reduce((function(t,e){return t.replace(e[0],e[1])}),t)}}}]);
//# sourceMappingURL=354.fbf27664.js.map