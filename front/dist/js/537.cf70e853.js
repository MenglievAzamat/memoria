"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[537],{1363:function(e,t,o){o.d(t,{A:function(){return h}});var r=o(641),s=o(33),n="data:image/png;base64,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";const a={class:"flex flex-col items-center justify-center"},i={class:"text-gold mb-[1.4375rem]"};function l(e,t,o,l,u,c){return(0,r.uX)(),(0,r.CE)("div",a,[t[0]||(t[0]=(0,r.Lk)("img",{class:"w-[20.3125rem] h-[1.1875rem] mb-[1.25rem]",src:n,alt:"gold.png"},null,-1)),(0,r.Lk)("p",i,(0,s.v_)(o.text),1)])}var u={name:"GoldenText",props:{text:{type:String,required:!0}}},c=o(6262);const d=(0,c.A)(u,[["render",l],["__scopeId","data-v-60bc2a74"]]);var h=d},2827:function(e,t,o){o.d(t,{A:function(){return g}});var r=o(641),s=o(33);const n={class:"buttons flex items-center"},a={class:"help relative"},i={href:"https://t.me/MEMORIAbook",target:"_blank"},l={href:"https://wa.me/79179008892",target:"_blank"};function u(e,t,o,u,c,d){const h=(0,r.g2)("Icon");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("div",a,[(0,r.Lk)("button",{id:"1",class:"mr-[0.6875rem] z-20",onClick:t[0]||(t[0]=t=>e.help=!e.help)},[(0,r.bF)(h,{type:"message"}),t[2]||(t[2]=(0,r.eW)("Помощь"))]),(0,r.Lk)("a",i,[(0,r.Lk)("button",{id:"2",class:(0,s.C4)([{"top-[3.4375rem]":e.help,"hidden top-0":!e.help},"absolute mr-[0.6875rem] z-20"])}," Telegram ",2)]),(0,r.Lk)("a",l,[(0,r.Lk)("button",{id:"3",class:(0,s.C4)([{"top-[6.875rem]":e.help,"hidden top-0":!e.help},"absolute mr-[0.6875rem] z-10"])}," WhatsApp ",2)])]),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>d.logout&&d.logout(...e))},[(0,r.bF)(h,{type:"profile"}),t[3]||(t[3]=(0,r.eW)("Выйти"))])])}var c=o(5196),d=o(3468),h={name:"UserButtons",components:{Icon:c.A},data:()=>({store:(0,d.k)(),help:!1}),methods:{async logout(){await this.store.logout()}}},m=o(6262);const p=(0,m.A)(h,[["render",u]]);var g=p},2724:function(e,t,o){o.r(t),o.d(t,{default:function(){return q}});var r=o(641);const s={class:"texture-bg absolute top-0 bottom-0 right-0 left-0 overflow-hidden"},n={key:1,class:"body flex h-full"},a={class:"w-[22.9375rem]"},i={class:"body-content w-[calc(100%-22.9375rem)] pt-[5.3125rem] pl-[4.875rem] pr-[14.75rem] overflow-scroll"},l={class:"flex justify-between items-start"};function u(e,t,o,u,c,d){const h=(0,r.g2)("Loading"),m=(0,r.g2)("Sidebar"),p=(0,r.g2)("GoldenText"),g=(0,r.g2)("UserButtons"),b=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",s,[d.loading?((0,r.uX)(),(0,r.Wv)(h,{key:0})):((0,r.uX)(),(0,r.CE)("div",n,[(0,r.Lk)("div",a,[(0,r.bF)(m)]),(0,r.Lk)("div",i,[(0,r.Lk)("div",l,[(0,r.bF)(p,{text:d.topText},null,8,["text"]),(0,r.bF)(g)]),(0,r.bF)(b)])]))])}var c=o(33),d=o(3751),h=o(5549);const m={class:"overflow-scroll w-full h-full bg-[#131313]"},p={class:"logo flex flex-col justify-center items-center px-[2.25rem] py-[4.6875rem]"},g={class:"text-[0.875rem] mt-2"},b={class:"menu h-[24.75rem] overflow-scroll mb-4"},k={class:"final w-full"},f={key:0,class:"absolute top-0 bottom-0 right-0 left-0 flex justify-center items-center"},v={class:"body z-30 rounded min-w-[50rem] p-4"},A={class:"flex justify-between"};function w(e,t,o,s,n,a){const i=(0,r.g2)("Progress"),l=(0,r.g2)("MenuItem");return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.Lk)("div",p,[t[7]||(t[7]=(0,r.Lk)("img",{class:"w-[15.5rem] h-[3.875rem] mb-[1.875rem]",src:h,alt:"logo.png"},null,-1)),(0,r.bF)(i,{progress:a.percentage},null,8,["progress"]),(0,r.Lk)("p",g,(0,c.v_)(`${e.current_page} из 100 страниц заполнено`),1)]),(0,r.Lk)("div",b,[(0,r.bF)(l,{text:"Обложка",to:"/client/book/cover"}),(0,r.bF)(l,{text:"Титульный лист",to:"/client/book/title"}),(0,r.bF)(l,{text:"Содержание:",disabled:""}),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.chapters,((e,t)=>((0,r.uX)(),(0,r.Wv)(l,{key:e.id,text:t+1+". "+a.cropText(e.title),to:`/client/book/chapters/${e.id}`},null,8,["text","to"])))),128))]),(0,r.Lk)("div",k,[a.isAdmin&&e.store.book?.open?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"w-full rounded-none mb-1",onClick:t[0]||(t[0]=(...e)=>a.toggleBook&&a.toggleBook(...e))},"Закрыть книгу")):a.isAdmin&&!e.store.book?.open?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"w-full rounded-none mb-1",onClick:t[1]||(t[1]=(...e)=>a.toggleBook&&a.toggleBook(...e))},"Открыть книгу")):(0,r.Q3)("",!0),a.isAdmin?((0,r.uX)(),(0,r.CE)("button",{key:2,class:"w-full rounded-none mb-1",onClick:t[2]||(t[2]=t=>e.popupActive=!0)},"Добавить главу")):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"w-full rounded-none mb-[3.5rem]",onClick:t[3]||(t[3]=(...e)=>a.review&&a.review(...e))},"Просмотр книги"),t[8]||(t[8]=(0,r.Lk)("div",{class:"px-[2.25rem] mb-[0.625rem]"},[(0,r.Lk)("a",{class:"text-[1.3125rem] text-[#FDD892] opacity-[64%]",href:"/"},"Выйти на главную страницу")],-1))]),e.popupActive?((0,r.uX)(),(0,r.CE)("div",f,[t[9]||(t[9]=(0,r.Lk)("div",{class:"background absolute w-full h-full bg-black/80 z-20"},null,-1)),(0,r.Lk)("div",v,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.question=t),placeholder:"Вопрос..."},null,512),[[d.Jo,e.question]]),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.title=t),placeholder:"Оглавление..."},null,512),[[d.Jo,e.title]]),(0,r.Lk)("div",A,[(0,r.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>a.savePage&&a.savePage(...e))},"Сохранить")])])])):(0,r.Q3)("",!0)])}const C={class:"relative overflow-hidden w-full h-[1.125rem] rounded-full"};function x(e,t,o,s,n,a){return(0,r.uX)(),(0,r.CE)("div",C,[t[0]||(t[0]=(0,r.Lk)("div",{class:"absolute w-full h-full bg-white"},null,-1)),(0,r.Lk)("div",{class:"absolute w-full h-full bg-[#E3B661] rounded-full",style:(0,c.Tr)(`left:-${100-o.progress}%`)},null,4)])}var y={name:"Progress",props:{progress:{type:Number,required:!0}}},B=o(6262);const S=(0,B.A)(y,[["render",x],["__scopeId","data-v-0ce24d00"]]);var F=S;function Q(e,t,o,s,n,a){return(0,r.uX)(),(0,r.CE)("div",{class:(0,c.C4)(["bg-[#1B1B1B] menu-item w-full pl-[4.0625rem] py-[1.25rem] text-white mb-1 text-[.875rem]",{"hover:bg-[#2A2A2A] cursor-pointer":!o.disabled,"font-bold":o.disabled,"bg-[#2A2A2A]":a.active}]),onClick:t[0]||(t[0]=(...e)=>a.goTo&&a.goTo(...e))},(0,c.v_)(o.text),3)}var R={name:"MenuItem",props:{text:{type:String,required:!0},disabled:{type:Boolean,default:!1},to:{type:String,default:"#"}},computed:{active(){return this.$route.href===this.to}},methods:{goTo(){this.disabled||this.$router.push(this.to)}}};const U=(0,B.A)(R,[["render",Q]]);var I=U,L=o(6506),O=o(3468),Z=o(5800),E={name:"Sidebar",components:{MenuItem:I,Progress:F},data:()=>({store:(0,L._)(),adminStore:(0,Z.g)(),userStore:(0,O.k)(),title:null,question:null,current_page:1,total_pages:100,chapters:[],popupActive:!1}),computed:{percentage(){return this.total_pages?Math.round(100*this.current_page/100):0},isAdmin(){return"admin"===this.userStore.user.type}},methods:{cropText(e){let t=20,o=e.slice(0,t);return o.length<t?o:o+"..."},async savePage(){await this.adminStore.saveChapter(this.store.book.id,{title:this.title,question:this.question})},review(){this.$router.push("/client/book/review")},async toggleBook(){await this.store.toggleBook(this.store.book.id).then((()=>{location.reload()}))}},mounted(){this.chapters=this.store.chapters.chapters,this.store.getTotalPages(this.store.book.id).then((e=>{this.current_page=e})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(this.popupActive=!1)}))}};const P=(0,B.A)(E,[["render",w]]);var M=P,Y=o(5196),N=o(2827),G=o(1363),J=o(5111),T=o(464),z={name:"BookView",components:{Loading:T.A,GoldenText:G.A,UserButtons:N.A,Icon:Y.A,Sidebar:M},data:()=>({bookStore:(0,L._)(),loadingStore:(0,J.r)(),userStore:(0,O.k)()}),computed:{topText(){return"/client/book/review"===this.$route.href?"Просмотр книги":"Заполнение книги"},loading(){return this.loadingStore.loading}},async mounted(){this.loadingStore.loadingOn(),await this.userStore.fetchUser().then((async()=>{let e;if("admin"===this.userStore.user.type){let t=JSON.parse(localStorage.getItem("admin")).bookId;e=this.bookStore.fetchBookById(t)}else e=this.bookStore.fetchBookByUserId(this.userStore.user.id);await e.then((async()=>{await this.bookStore.getChapters(this.bookStore.book.id).then((()=>{"/client/book"===this.$route.path&&this.$router.push("/client/book/cover")}))}))})).finally((()=>{this.loadingStore.loadingOff()}))}};const X=(0,B.A)(z,[["render",u]]);var q=X},5800:function(e,t,o){o.d(t,{g:function(){return s}});var r=o(5615);const s=(0,r.nY)("admin",{state:()=>({books:!1}),actions:{setBooks(e){this.books=e},async fetchBooks(){await this.$axios.get("/admin/books").then((e=>{this.setBooks(e.data.books)}))},async saveUser(e){await this.$axios.post("/admin/user",e).then((e=>{alert(e.data.message),location.reload()}))},async saveChapter(e,t){await this.$axios.post(`/admin/book/${e}/chapter`,t).then((e=>{alert(e.data.message),location.reload()}))},async saveChapterQuestion(e,t){await this.$axios.put(`/admin/chapter/${e}/question`,t).then((e=>{alert(e.data.message),location.reload()}))}}})},5111:function(e,t,o){o.d(t,{r:function(){return s}});var r=o(5615);const s=(0,r.nY)("loading",{state:()=>({loading:!0}),actions:{loadingOn(){this.loading=!0},loadingOff(){this.loading=!1}}})}}]);
//# sourceMappingURL=537.cf70e853.js.map